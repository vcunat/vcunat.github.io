<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Fractal Image Compressor: modules.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>modules.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef MODULES_HEADER_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define MODULES_HEADER_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="comment">//  Forwards for all classes visible outside this header</span>
<a name="l00005"></a>00005 <span class="keyword">class </span><a class="code" href="classModule.html" title="A common base class for all modules.">Module</a>;
<a name="l00006"></a>00006 <span class="keyword">class </span><a class="code" href="classModuleFactory.html" title="A singleton factory class for creating modules.">ModuleFactory</a>;
<a name="l00007"></a>00007 <span class="keyword">template</span> &lt;<span class="keyword">class</span> Iface&gt; <span class="keyword">class </span><a class="code" href="classInterface.html" title="A base class for all interfaces, parametrized by the interface&amp;#39;s type.">Interface</a>;
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 
<a name="l00011"></a>00011 
<a name="l00012"></a><a class="code" href="classModule.html">00012</a> <span class="keyword">class </span><a class="code" href="classModule.html" title="A common base class for all modules.">Module</a> {
<a name="l00013"></a><a class="code" href="classModule.html#c56c9ca0ae9ead0ea6a642cf64d3e3c2">00013</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classModuleFactory.html" title="A singleton factory class for creating modules.">ModuleFactory</a>; 
<a name="l00014"></a>00014 <span class="comment">//  Type definitions</span>
<a name="l00015"></a>00015 <span class="keyword">public</span>:
<a name="l00017"></a><a class="code" href="classModule.html#0d7267d0abb3311b695471793ad723aa">00017</a>     <span class="keyword">enum</span> <a class="code" href="classModule.html#0d7267d0abb3311b695471793ad723aa" title="Two types of cloning, used in clone.">CloneMethod</a> { ShallowCopy, DeepCopy };
<a name="l00019"></a><a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2">00019</a>     <span class="keyword">enum</span> <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2" title="Types of a setting.">ChoiceType</a> {
<a name="l00020"></a><a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc26cbe19ba5e3780bc9739e6c0092b4431">00020</a>         <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc26cbe19ba5e3780bc9739e6c0092b4431" title="a list-terminator">Stop</a>,       
<a name="l00021"></a><a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2386c8944cfbec7a3e93f98cc6fd98df2">00021</a>         <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2386c8944cfbec7a3e93f98cc6fd98df2" title="integer from an interval">Int</a>,        
<a name="l00022"></a><a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc208f683b276a92487fd695f445261fbc1">00022</a>         <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc208f683b276a92487fd695f445261fbc1" title="integer from an interval prefixed with 2^">IntLog2</a>,    
<a name="l00023"></a><a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc23dc9b84a0008e6302a3ec70e40a2d9f7">00023</a>         <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc23dc9b84a0008e6302a3ec70e40a2d9f7" title="real number from an interval">Float</a>,      
<a name="l00024"></a><a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc244a205073fbed44dccd69bb4adf53e5c">00024</a>         <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc244a205073fbed44dccd69bb4adf53e5c" title="a connection to another module (shown as a combo-box)">ModuleCombo</a>,
<a name="l00025"></a><a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2af3df288d47faf7294135ae83d214922">00025</a>         <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2af3df288d47faf7294135ae83d214922" title="choice from a list of strings">Combo</a>       
<a name="l00026"></a>00026     };
<a name="l00028"></a><a class="code" href="unionModule_1_1SettingValue.html">00028</a>     <span class="keyword">union </span><a class="code" href="unionModule_1_1SettingValue.html" title="Represents one setting - one number, real or integer.">SettingValue</a> {
<a name="l00029"></a><a class="code" href="unionModule_1_1SettingValue.html#de47847b53cb9c43af708e37526fb648">00029</a>         <span class="keywordtype">int</span> <a class="code" href="unionModule_1_1SettingValue.html#de47847b53cb9c43af708e37526fb648" title="Setting value for integer/module types (see Module::ChoiceType).">i</a>;      
<a name="l00030"></a><a class="code" href="unionModule_1_1SettingValue.html#61257c78151335f2985193130565aebe">00030</a>         <span class="keywordtype">float</span> <a class="code" href="unionModule_1_1SettingValue.html#61257c78151335f2985193130565aebe" title="Setting value for real-number type (see Module::ChoiceType).">f</a>;    
<a name="l00031"></a>00031     };
<a name="l00033"></a><a class="code" href="structModule_1_1SettingType.html">00033</a>     <span class="keyword">struct </span><a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> {
<a name="l00034"></a><a class="code" href="structModule_1_1SettingType.html#8baa28833330e216ae1fd6feebd812dd">00034</a>         <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2" title="Types of a setting.">ChoiceType</a> <a class="code" href="structModule_1_1SettingType.html#8baa28833330e216ae1fd6feebd812dd" title="The type of the item.">type</a>;        
<a name="l00035"></a><a class="code" href="structModule_1_1SettingType.html#ea7a59fee77533034118b588ef41c37a">00035</a>         <a class="code" href="unionModule_1_1SettingValue.html" title="Represents one setting - one number, real or integer.">SettingValue</a> <a class="code" href="structModule_1_1SettingType.html#ea7a59fee77533034118b588ef41c37a" title="The default setting.">defaults</a>;  
<a name="l00036"></a>00036 
<a name="l00037"></a>00037         <span class="keyword">union </span>{
<a name="l00038"></a><a class="code" href="structModule_1_1SettingType.html#0cf546113d6577ec7840a02425fb9663">00038</a>             <span class="keywordtype">int</span> <a class="code" href="structModule_1_1SettingType.html#0cf546113d6577ec7840a02425fb9663" title="Lower and upper bound (type==Int,IntLog2).">i</a>[2];           
<a name="l00039"></a><a class="code" href="structModule_1_1SettingType.html#e6adabdcd52292db35e3c12798af97f7">00039</a>             <span class="keywordtype">float</span> <a class="code" href="structModule_1_1SettingType.html#e6adabdcd52292db35e3c12798af97f7" title="Lower and upper bound (type==Float).">f</a>[2];         
<a name="l00040"></a><a class="code" href="structModule_1_1SettingType.html#7099a0c8755ce6f7ad16df83d6a391b2">00040</a>             <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structModule_1_1SettingType.html#7099a0c8755ce6f7ad16df83d6a391b2" title="Lines of the combo-box (type==Combo).">text</a>;   
<a name="l00041"></a>00041 
<a name="l00043"></a><a class="code" href="structModule_1_1SettingType.html#11c3bbb60a8dac48aaf38266da89a93c">00043</a>             <span class="keyword">const</span> std::vector&lt;int&gt; *<a class="code" href="structModule_1_1SettingType.html#11c3bbb60a8dac48aaf38266da89a93c" title="Pointer to the vector of IDs of compatible modules (type==ModuleCombo), meant to...">compatIDs</a>;
<a name="l00044"></a>00044         } <a class="code" href="structModule_1_1SettingType.html#70a4906ea1b9f01bd9bd5cd999313679" title="Additional data, differs for different type.">data</a>;             
<a name="l00045"></a>00045     };
<a name="l00046"></a>00046 
<a name="l00048"></a><a class="code" href="structModule_1_1SettingTypeItem.html">00048</a>     <span class="keyword">struct </span><a class="code" href="structModule_1_1SettingTypeItem.html" title="Represents the type of one setting - including label, description, etc.">SettingTypeItem</a> {
<a name="l00049"></a><a class="code" href="structModule_1_1SettingTypeItem.html#017407a16af8726a6de461bf40dea4c4">00049</a>         <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structModule_1_1SettingTypeItem.html" title="Represents the type of one setting - including label, description, etc.">SettingTypeItem</a> <a class="code" href="structModule_1_1SettingTypeItem.html#017407a16af8726a6de461bf40dea4c4" title="Predefined list terminator.">stopper</a>; 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structModule_1_1SettingTypeItem.html#34d8d0935d6da312a7de0a4601c993a1" title="The text label of the setting.">label</a>   
<a name="l00052"></a><a class="code" href="structModule_1_1SettingTypeItem.html#34d8d0935d6da312a7de0a4601c993a1">00052</a>         , *<a class="code" href="structModule_1_1SettingTypeItem.html#197d650263045a20cd4ebd36357d702a" title="Description text.">desc</a>;            
<a name="l00053"></a><a class="code" href="structModule_1_1SettingTypeItem.html#e3cd318999bb228272c0e65adf6b20c7">00053</a>         <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> <a class="code" href="structModule_1_1SettingTypeItem.html#e3cd318999bb228272c0e65adf6b20c7" title="The type of this setting.">type</a>;   
<a name="l00054"></a>00054     };
<a name="l00055"></a>00055 
<a name="l00057"></a><a class="code" href="structModule_1_1SettingItem.html">00057</a>     <span class="keyword">struct </span><a class="code" href="structModule_1_1SettingItem.html" title="Represents one setting value in a module.">SettingItem</a> {
<a name="l00058"></a><a class="code" href="structModule_1_1SettingItem.html#17f621f90a4080f17bc1db4e60f26670">00058</a>         <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a> *<a class="code" href="structModule_1_1SettingItem.html#17f621f90a4080f17bc1db4e60f26670" title="Pointer to the connected module (if type is Module::ModuleCombo).">m</a>;  
<a name="l00059"></a><a class="code" href="structModule_1_1SettingItem.html#71a46105fdddba87d6fcc3f18648a608">00059</a>         <a class="code" href="unionModule_1_1SettingValue.html" title="Represents one setting - one number, real or integer.">SettingValue</a> <a class="code" href="structModule_1_1SettingItem.html#71a46105fdddba87d6fcc3f18648a608" title="The setting value.">val</a>;   
<a name="l00060"></a>00060 
<a name="l00062"></a><a class="code" href="structModule_1_1SettingItem.html#de592a0ca767f00ec76bea56c5e36888">00062</a>         <a class="code" href="structModule_1_1SettingItem.html#de592a0ca767f00ec76bea56c5e36888" title="Just nulls the module pointer.">SettingItem</a>(): <a class="code" href="structModule_1_1SettingItem.html#17f621f90a4080f17bc1db4e60f26670" title="Pointer to the connected module (if type is Module::ModuleCombo).">m</a>(0) { DEBUG_ONLY( <a class="code" href="structModule_1_1SettingItem.html#71a46105fdddba87d6fcc3f18648a608" title="The setting value.">val</a>.<a class="code" href="unionModule_1_1SettingValue.html#61257c78151335f2985193130565aebe" title="Setting value for real-number type (see Module::ChoiceType).">f</a>= std::numeric_limits&lt;float&gt;::quiet_NaN(); ) }
<a name="l00063"></a>00063 
<a name="l00065"></a><a class="code" href="structModule_1_1SettingItem.html#4033ac97215ac15fa56b249ecbd0ce76">00065</a>         <a class="code" href="structModule_1_1SettingItem.html#4033ac97215ac15fa56b249ecbd0ce76" title="Creates a default settings-item for a settings-item-type.">SettingItem</a>(<span class="keyword">const</span> <a class="code" href="structModule_1_1SettingTypeItem.html" title="Represents the type of one setting - including label, description, etc.">SettingTypeItem</a> &amp;typeItem): <a class="code" href="structModule_1_1SettingItem.html#17f621f90a4080f17bc1db4e60f26670" title="Pointer to the connected module (if type is Module::ModuleCombo).">m</a>(0), <a class="code" href="structModule_1_1SettingItem.html#71a46105fdddba87d6fcc3f18648a608" title="The setting value.">val</a>(typeItem.type.defaults) {}
<a name="l00066"></a>00066 
<a name="l00068"></a><a class="code" href="structModule_1_1SettingItem.html#68e8dedc2828d55dbdd6755c543eee5a">00068</a>         <a class="code" href="structModule_1_1SettingItem.html#68e8dedc2828d55dbdd6755c543eee5a" title="Just deletes the module pointer.">~SettingItem</a>() { <span class="keyword">delete</span> <a class="code" href="structModule_1_1SettingItem.html#17f621f90a4080f17bc1db4e60f26670" title="Pointer to the connected module (if type is Module::ModuleCombo).">m</a>; }
<a name="l00069"></a>00069     };
<a name="l00070"></a>00070 
<a name="l00072"></a><a class="code" href="structModule_1_1TypeInfo.html">00072</a>     <span class="keyword">struct </span><a class="code" href="structModule_1_1TypeInfo.html" title="Information about one module-type.">TypeInfo</a> {
<a name="l00073"></a><a class="code" href="structModule_1_1TypeInfo.html#256e567189a46d449dd975a82936134b">00073</a>         <span class="keywordtype">int</span> <a class="code" href="structModule_1_1TypeInfo.html#256e567189a46d449dd975a82936134b" title="The module-type&amp;#39;s ID.">id</a>;                         
<a name="l00074"></a>00074         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structModule_1_1TypeInfo.html#c17eb9809aa38ac30ef1ff582d10e20e" title="The module-type&amp;#39;s name.">name</a>                
<a name="l00075"></a><a class="code" href="structModule_1_1TypeInfo.html#c17eb9809aa38ac30ef1ff582d10e20e">00075</a>         , *<a class="code" href="structModule_1_1TypeInfo.html#74881f0d3b05303f64b87237fdb549ed" title="The module-type&amp;#39;s description.">desc</a>;                        
<a name="l00076"></a><a class="code" href="structModule_1_1TypeInfo.html#6fabafddb7b1669d9cbb6b3996a8c4a9">00076</a>         <span class="keywordtype">int</span> <a class="code" href="structModule_1_1TypeInfo.html#6fabafddb7b1669d9cbb6b3996a8c4a9" title="The number of setting items.">setLength</a>;                  
<a name="l00077"></a><a class="code" href="structModule_1_1TypeInfo.html#0f441c8f8d4dceec75aee383f478e625">00077</a>         <span class="keyword">const</span> <a class="code" href="structModule_1_1SettingTypeItem.html" title="Represents the type of one setting - including label, description, etc.">SettingTypeItem</a> *<a class="code" href="structModule_1_1TypeInfo.html#0f441c8f8d4dceec75aee383f478e625" title="The types of module&amp;#39;s settings.">setType</a>; 
<a name="l00078"></a>00078     };
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="comment">//  Data definitions</span>
<a name="l00081"></a>00081 <span class="keyword">protected</span>:
<a name="l00082"></a><a class="code" href="classModule.html#05a8665b709707811945fa29714c2e00">00082</a>     <a class="code" href="structModule_1_1SettingItem.html" title="Represents one setting value in a module.">SettingItem</a> *<a class="code" href="classModule.html#05a8665b709707811945fa29714c2e00" title="The current setting values of this Module.">settings</a>; 
<a name="l00083"></a>00083 
<a name="l00086"></a>00086 <span class="keyword">private</span>:
<a name="l00088"></a>00088     <a class="code" href="structModule_1_1SettingItem.html" title="Represents one setting value in a module.">SettingItem</a>* <a class="code" href="classModule.html#1122f016df478b67a21bd27d8083bbaf" title="Creates a copy of module&amp;#39;s settings (includes the whole module subtree).">copySettings</a>(<a class="code" href="classModule.html#0d7267d0abb3311b695471793ad723aa" title="Two types of cloning, used in clone.">CloneMethod</a> method) <span class="keyword">const</span>;
<a name="l00090"></a>00090     <span class="keywordtype">void</span> <a class="code" href="classModule.html#5154ee9e5a649eaf2427dae434f4f57b" title="Called for prototypes to initialize the default links to other modules.">initDefaultModuleLinks</a>();
<a name="l00092"></a>00092     <span class="keywordtype">void</span> <a class="code" href="classModule.html#bced57ac9e266f8674ea8a76e7aec51a" title="Called for prototypes to null links to other modules.">nullModuleLinks</a>();
<a name="l00094"></a>00094     <span class="keywordtype">void</span> <a class="code" href="classModule.html#db6e18ffa28139a8f56995f41526a414" title="Called for prototypes to create the settings and inicialize them with defaults.">createDefaultSettings</a>();
<a name="l00095"></a>00095 
<a name="l00097"></a>00097     <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a>&amp; <a class="code" href="classModule.html#d895febcc8be610208a1625055e95d7b" title="Denial of assigment.">operator=</a>(<span class="keyword">const</span> <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a>&amp;);
<a name="l00099"></a>00099     <a class="code" href="classModule.html#5a240a8a9ab1813b17bcb810b24ceaea" title="Initializes an empty module.">Module</a>(<span class="keyword">const</span> <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a>&amp;);
<a name="l00101"></a>00101 <span class="keyword">protected</span>:
<a name="l00103"></a><a class="code" href="classModule.html#5a240a8a9ab1813b17bcb810b24ceaea">00103</a>     <a class="code" href="classModule.html#5a240a8a9ab1813b17bcb810b24ceaea" title="Initializes an empty module.">Module</a>(): <a class="code" href="classModule.html#05a8665b709707811945fa29714c2e00" title="The current setting values of this Module.">settings</a>(0) {}
<a name="l00104"></a>00104 
<a name="l00107"></a>00107     <span class="keyword">virtual</span> <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a>* <a class="code" href="classModule.html#40ff6b686b05a4757ccc592021fe189a" title="Cloning method, implemented in all modules via macros.">abstractClone</a>(<a class="code" href="classModule.html#0d7267d0abb3311b695471793ad723aa" title="Two types of cloning, used in clone.">CloneMethod</a> method) <span class="keyword">const</span> =0;
<a name="l00108"></a>00108 <span class="keyword">public</span>: <span class="comment">// public because of GCC-3 versions</span>
<a name="l00110"></a>00110 <span class="comment"></span>    <span class="keyword">template</span>&lt;<span class="keyword">class</span> M&gt; M* <a class="code" href="classModule.html#fdbe57bc3861787fdebaae2ce44e3eb8" title="Concrete cloning method - templated by the actual type of the module.">concreteClone</a>(<a class="code" href="classModule.html#0d7267d0abb3311b695471793ad723aa" title="Two types of cloning, used in clone.">CloneMethod</a> method) <span class="keyword">const</span>;
<a name="l00111"></a>00111     
<a name="l00112"></a>00112 <span class="keyword">public</span>:
<a name="l00114"></a><a class="code" href="classModule.html#57f2a54e7dacfb7a67355f1412c07130">00114</a>     <span class="keyword">virtual</span> <a class="code" href="classModule.html#57f2a54e7dacfb7a67355f1412c07130" title="Deletes the settings, destroying child modules as well.">~Module</a>()
<a name="l00115"></a>00115         { <span class="keyword">delete</span>[] <a class="code" href="classModule.html#05a8665b709707811945fa29714c2e00" title="The current setting values of this Module.">settings</a>; }
<a name="l00116"></a>00116 
<a name="l00119"></a>00119     <span class="keyword">virtual</span> <span class="keyword">const</span> TypeInfo&amp; <a class="code" href="classModule.html#987b1cfc57aae292f5375fbb88a4fd32" title="Returns reference to module-type&amp;#39;s information, like count and types of settings...">info</a>() <span class="keyword">const</span> =0;
<a name="l00120"></a>00120 
<a name="l00121"></a>00121     DECLARE_debugModule_empty
<a name="l00122"></a>00122 
<a name="l00125"></a>00125 <span class="keyword">public</span>:
<a name="l00128"></a>00128     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classModule.html#70e9c083660b1f2b6f8276e99ca4d923" title="Creates or updates settings-box and/or settings-tree. if overridden in derived modules...">adjustSettings</a>( <span class="keywordtype">int</span> which, QTreeWidgetItem *myTree, QGroupBox *setBox );
<a name="l00129"></a>00129 <span class="keyword">protected</span>:
<a name="l00131"></a>00131     <span class="keywordtype">void</span> <a class="code" href="classModule.html#0bfe9d67632bb3e6a1c6efed1e9f8f43" title="Reads a setting value from a widget.">widget2settings</a>( <span class="keyword">const</span> QWidget *widget, <span class="keywordtype">int</span> which );
<a name="l00133"></a>00133     <span class="keywordtype">void</span> <a class="code" href="classModule.html#5ca282210fd6e65bc3b41f0779a5add3" title="Writes a setting value into a widget.">settings2widget</a>( QWidget *widget, <span class="keywordtype">int</span> which );
<a name="l00135"></a>00135     <span class="keywordtype">void</span> <a class="code" href="classModule.html#babe0a33447b9464cb651b5453450c29" title="Initializes a widget according to a setting-item type.">settingsType2widget</a>( QWidget *widget, <span class="keyword">const</span> SettingTypeItem &amp;typeItem );
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="comment">//  Other methods</span>
<a name="l00139"></a>00139 <span class="keyword">protected</span>:
<a name="l00141"></a>00141     <span class="keywordtype">void</span> <a class="code" href="classModule.html#eb8ddf381baa54ae94627b17f7845bde" title="Saves all the settings, icluding child modules.">file_saveAllSettings</a>(std::ostream &amp;stream);
<a name="l00143"></a>00143     <span class="keywordtype">void</span> <a class="code" href="classModule.html#14e916b29b4ab3e5d9b5a769797eb392" title="Loads all the settings, icluding child modules (and their settings).">file_loadAllSettings</a>(std::istream &amp;stream);
<a name="l00145"></a>00145     <span class="keywordtype">void</span> <a class="code" href="classModule.html#96e114820c3a84d684d5e2d661a764af" title="Puts a module-identifier in a stream (which is the index in settings).">file_saveModuleType</a>( std::ostream &amp;os, <span class="keywordtype">int</span> which );
<a name="l00148"></a>00148     <span class="keywordtype">void</span> <a class="code" href="classModule.html#f398c50aa7db17f0ec2096a787141637" title="Gets an module-identifier from the stream, initializes the pointer in settings with...">file_loadModuleType</a>( std::istream &amp;is, <span class="keywordtype">int</span> which );
<a name="l00150"></a><a class="code" href="classModule.html#359731fdb1af95f2190e1031e1332515">00150</a>     <span class="keywordtype">int</span>&amp; <a class="code" href="classModule.html#359731fdb1af95f2190e1031e1332515" title="A shortcut method for working with integer settings.">settingsInt</a>(<span class="keywordtype">int</span> index)
<a name="l00151"></a>00151         { <span class="keywordflow">return</span> <a class="code" href="classModule.html#05a8665b709707811945fa29714c2e00" title="The current setting values of this Module.">settings</a>[index].<a class="code" href="structModule_1_1SettingItem.html#71a46105fdddba87d6fcc3f18648a608" title="The setting value.">val</a>.<a class="code" href="unionModule_1_1SettingValue.html#de47847b53cb9c43af708e37526fb648" title="Setting value for integer/module types (see Module::ChoiceType).">i</a>; }
<a name="l00152"></a>00152     <span class="keywordtype">int</span> <a class="code" href="classModule.html#359731fdb1af95f2190e1031e1332515" title="A shortcut method for working with integer settings.">settingsInt</a>(<span class="keywordtype">int</span> index)<span class="keyword"> const</span>
<a name="l00153"></a>00153 <span class="keyword">        </span>{ <span class="keywordflow">return</span> <a class="code" href="classModule.html#05a8665b709707811945fa29714c2e00" title="The current setting values of this Module.">settings</a>[index].<a class="code" href="structModule_1_1SettingItem.html#71a46105fdddba87d6fcc3f18648a608" title="The setting value.">val</a>.<a class="code" href="unionModule_1_1SettingValue.html#de47847b53cb9c43af708e37526fb648" title="Setting value for integer/module types (see Module::ChoiceType).">i</a>; }
<a name="l00154"></a>00154 
<a name="l00158"></a><a class="code" href="classModule.html#3db711d7f0e2504694730ae376429773">00158</a>     <span class="keyword">static</span> <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> <a class="code" href="classModule.html#3db711d7f0e2504694730ae376429773" title="Creates a bounded integer setting, optionally shown as a power of two.">settingInt</a>(<span class="keywordtype">int</span> min,<span class="keywordtype">int</span> defaults,<span class="keywordtype">int</span> max,<a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2" title="Types of a setting.">ChoiceType</a> type=<a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2386c8944cfbec7a3e93f98cc6fd98df2" title="integer from an interval">Int</a>) {
<a name="l00159"></a>00159         ASSERT( type==<a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2386c8944cfbec7a3e93f98cc6fd98df2" title="integer from an interval">Int</a> || type==<a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc208f683b276a92487fd695f445261fbc1" title="integer from an interval prefixed with 2^">IntLog2</a> );
<a name="l00160"></a>00160         <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> result;
<a name="l00161"></a>00161         result.<a class="code" href="structModule_1_1SettingType.html#8baa28833330e216ae1fd6feebd812dd" title="The type of the item.">type</a>= type;
<a name="l00162"></a>00162         result.<a class="code" href="structModule_1_1SettingType.html#ea7a59fee77533034118b588ef41c37a" title="The default setting.">defaults</a>.<a class="code" href="unionModule_1_1SettingValue.html#de47847b53cb9c43af708e37526fb648" title="Setting value for integer/module types (see Module::ChoiceType).">i</a>= defaults;
<a name="l00163"></a>00163         result.<a class="code" href="structModule_1_1SettingType.html#70a4906ea1b9f01bd9bd5cd999313679" title="Additional data, differs for different type.">data</a>.<a class="code" href="structModule_1_1SettingType.html#0cf546113d6577ec7840a02425fb9663" title="Lower and upper bound (type==Int,IntLog2).">i</a>[0]= min;
<a name="l00164"></a>00164         result.<a class="code" href="structModule_1_1SettingType.html#70a4906ea1b9f01bd9bd5cd999313679" title="Additional data, differs for different type.">data</a>.<a class="code" href="structModule_1_1SettingType.html#0cf546113d6577ec7840a02425fb9663" title="Lower and upper bound (type==Int,IntLog2).">i</a>[1]= max;
<a name="l00165"></a>00165         <span class="keywordflow">return</span> result;
<a name="l00166"></a>00166     }
<a name="l00168"></a><a class="code" href="classModule.html#adab4ec40942f527ec59797f48b4a452">00168</a>     <span class="keyword">static</span> <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> <a class="code" href="classModule.html#adab4ec40942f527ec59797f48b4a452" title="Creates a bounded real-number setting.">settingFloat</a>(<span class="keywordtype">float</span> min,<span class="keywordtype">float</span> defaults,<span class="keywordtype">float</span> max) {
<a name="l00169"></a>00169         <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> result;
<a name="l00170"></a>00170         result.<a class="code" href="structModule_1_1SettingType.html#8baa28833330e216ae1fd6feebd812dd" title="The type of the item.">type</a>= <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc23dc9b84a0008e6302a3ec70e40a2d9f7" title="real number from an interval">Float</a>;
<a name="l00171"></a>00171         result.<a class="code" href="structModule_1_1SettingType.html#ea7a59fee77533034118b588ef41c37a" title="The default setting.">defaults</a>.<a class="code" href="unionModule_1_1SettingValue.html#61257c78151335f2985193130565aebe" title="Setting value for real-number type (see Module::ChoiceType).">f</a>= defaults;
<a name="l00172"></a>00172         result.<a class="code" href="structModule_1_1SettingType.html#70a4906ea1b9f01bd9bd5cd999313679" title="Additional data, differs for different type.">data</a>.<a class="code" href="structModule_1_1SettingType.html#e6adabdcd52292db35e3c12798af97f7" title="Lower and upper bound (type==Float).">f</a>[0]= min;
<a name="l00173"></a>00173         result.<a class="code" href="structModule_1_1SettingType.html#70a4906ea1b9f01bd9bd5cd999313679" title="Additional data, differs for different type.">data</a>.<a class="code" href="structModule_1_1SettingType.html#e6adabdcd52292db35e3c12798af97f7" title="Lower and upper bound (type==Float).">f</a>[1]= max;
<a name="l00174"></a>00174         <span class="keywordflow">return</span> result;
<a name="l00175"></a>00175     }
<a name="l00177"></a><a class="code" href="classModule.html#0c624ee5825cb42160246738df173e84">00177</a>     <span class="keyword">static</span> <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> <a class="code" href="classModule.html#0c624ee5825cb42160246738df173e84" title="Creates a choose-one-of setting shown as a combo-box.">settingCombo</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *text,<span class="keywordtype">int</span> defaults) {
<a name="l00178"></a>00178         ASSERT( defaults&gt;=0 &amp;&amp; defaults&lt;1+<a class="code" href="util_8h.html#41b7fcd962556540a76036736e22def5" title="Counts the number of &amp;#39; &amp;#39; characters in a C-string.">countEOLs</a>(text) );
<a name="l00179"></a>00179         <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> result;
<a name="l00180"></a>00180         result.<a class="code" href="structModule_1_1SettingType.html#8baa28833330e216ae1fd6feebd812dd" title="The type of the item.">type</a>= <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc2af3df288d47faf7294135ae83d214922" title="choice from a list of strings">Combo</a>;
<a name="l00181"></a>00181         result.<a class="code" href="structModule_1_1SettingType.html#ea7a59fee77533034118b588ef41c37a" title="The default setting.">defaults</a>.<a class="code" href="unionModule_1_1SettingValue.html#de47847b53cb9c43af708e37526fb648" title="Setting value for integer/module types (see Module::ChoiceType).">i</a>= defaults;
<a name="l00182"></a>00182         result.<a class="code" href="structModule_1_1SettingType.html#70a4906ea1b9f01bd9bd5cd999313679" title="Additional data, differs for different type.">data</a>.<a class="code" href="structModule_1_1SettingType.html#7099a0c8755ce6f7ad16df83d6a391b2" title="Lines of the combo-box (type==Combo).">text</a>= text;
<a name="l00183"></a>00183         <span class="keywordflow">return</span> result;
<a name="l00184"></a>00184     }
<a name="l00188"></a><a class="code" href="classModule.html#242ee5eed1b17f34fc4f5be36c92386c">00188</a>     <span class="keyword">template</span>&lt;<span class="keyword">class</span> Iface&gt; <span class="keyword">static</span> <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> <a class="code" href="classModule.html#242ee5eed1b17f34fc4f5be36c92386c" title="Creates a connection to another module (type specified as a template parameter).">settingModule</a>(<span class="keywordtype">int</span> defaultID) {
<a name="l00189"></a>00189         <span class="keyword">const</span> std::vector&lt;int&gt; &amp;compMods= Iface::getCompMods();
<a name="l00190"></a>00190         <span class="keywordtype">int</span> index=  find( compMods.begin(), compMods.end(), defaultID ) - compMods.begin();
<a name="l00191"></a>00191         ASSERT( index &lt; (<span class="keywordtype">int</span>)compMods.size() );
<a name="l00192"></a>00192         <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> result;
<a name="l00193"></a>00193         result.type= <a class="code" href="classModule.html#0baedffa9e50881da4626ec45dc23cc244a205073fbed44dccd69bb4adf53e5c" title="a connection to another module (shown as a combo-box)">ModuleCombo</a>;
<a name="l00194"></a>00194         result.defaults.i= index;
<a name="l00195"></a>00195         result.data.compatIDs= &amp;compMods;
<a name="l00196"></a>00196         <span class="keywordflow">return</span> result;
<a name="l00197"></a>00197     }
<a name="l00199"></a><a class="code" href="classModule.html#202cbb95fb47e4f78e28d9d89d15e0c7">00199</a>     <span class="keyword">template</span>&lt;<span class="keyword">class</span> Iface&gt; <span class="keyword">static</span> <a class="code" href="structModule_1_1SettingType.html" title="Represents the type of one module&amp;#39;s setting - without label and description.">SettingType</a> <a class="code" href="classModule.html#202cbb95fb47e4f78e28d9d89d15e0c7" title="A shortcut to set the first compatible module as the default one.">settingModule</a>() {
<a name="l00200"></a>00200         <span class="keywordflow">return</span> settingModule&lt;Iface&gt;( Iface::getCompMods().front() );
<a name="l00201"></a>00201     }
<a name="l00203"></a>00203 }; <span class="comment">// Module class</span>
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="preprocessor">#define DECLARE_TypeInfo_helper(CNAME_,NAME_,DESC_,SETTYPE_...) \</span>
<a name="l00209"></a>00209 <span class="preprocessor"> \</span>
<a name="l00210"></a>00210 <span class="preprocessor">    friend class Module; </span><span class="comment">/* Needed for concreteClone */</span> \
<a name="l00211"></a>00211     <span class="comment">/*friend class ModuleFactory;*/</span> \
<a name="l00212"></a>00212     friend struct ModuleFactory::Creator&lt;CNAME_&gt;; <span class="comment">/* Needed for GCC-3 and ICC */</span> \
<a name="l00213"></a>00213 public: \
<a name="l00214"></a>00214     CNAME_* abstractClone(CloneMethod method=DeepCopy) const \
<a name="l00215"></a>00215         { return concreteClone&lt;CNAME_&gt;(method); } \
<a name="l00216"></a>00216  \
<a name="l00217"></a>00217     const TypeInfo&amp; info() const { \
<a name="l00218"></a>00218         static SettingTypeItem setType_[]= {SETTYPE_}; \
<a name="l00219"></a>00219         static TypeInfo info_= { \
<a name="l00220"></a>00220             id: ModuleFactory::getModuleID&lt;CNAME_&gt;(), \
<a name="l00221"></a>00221             name:NAME_, \
<a name="l00222"></a>00222             desc: DESC_, \
<a name="l00223"></a>00223             setLength: sizeof(setType_)/sizeof(*setType_)-1, \
<a name="l00224"></a>00224             setType: setType_ \
<a name="l00225"></a>00225         }; \
<a name="l00226"></a>00226         return info_; \
<a name="l00227"></a>00227     } \
<a name="l00228"></a>00228  \
<a name="l00229"></a>00229 
<a name="l00230"></a>00230 
<a name="l00233"></a>00233 <span class="preprocessor">#define DECLARE_TypeInfo_noSettings(CNAME_,NAME_,DESC_) \</span>
<a name="l00234"></a>00234 <span class="preprocessor">    DECLARE_TypeInfo_helper(CNAME_,NAME_,DESC_,SettingTypeItem::stopper)</span>
<a name="l00235"></a>00235 <span class="preprocessor"></span>
<a name="l00238"></a>00238 <span class="preprocessor">#define DECLARE_TypeInfo(CNAME_,NAME_,DESC_,SETTYPE_...) \</span>
<a name="l00239"></a>00239 <span class="preprocessor">    DECLARE_TypeInfo_helper(CNAME_,NAME_,DESC_,SETTYPE_,SettingTypeItem::stopper)</span>
<a name="l00240"></a>00240 <span class="preprocessor"></span>
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 
<a name="l00244"></a>00244 <span class="keyword">class </span><a class="code" href="classModuleFactory.html" title="A singleton factory class for creating modules.">ModuleFactory</a> {
<a name="l00246"></a>00246     <span class="keyword">static</span> <a class="code" href="classModuleFactory.html" title="A singleton factory class for creating modules.">ModuleFactory</a> *<a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a>;
<a name="l00248"></a>00248     std::vector&lt;Module*&gt; <a class="code" href="classModuleFactory.html#340df38d1c652ee5174beb1886dd2e09" title="Pointers to the prototypes for every module type (indexed by their ID&amp;#39;s).">prototypes</a>;
<a name="l00249"></a><a class="code" href="classModuleFactory.html#340df38d1c652ee5174beb1886dd2e09">00249</a> 
<a name="l00251"></a>00251     <a class="code" href="classModuleFactory.html#fa05e7042e92482f573ebb6dcdec9788" title="Private constructor to avoid uncontrolled instantiation.">ModuleFactory</a>() {}
<a name="l00253"></a>00253     <a class="code" href="classModuleFactory.html#d24656867b3840fd3003784e0639ce23" title="Deletes the prototypes.">~ModuleFactory</a>() {
<a name="l00254"></a><a class="code" href="classModuleFactory.html#d24656867b3840fd3003784e0639ce23">00254</a>         for_each( <a class="code" href="classModuleFactory.html#340df38d1c652ee5174beb1886dd2e09" title="Pointers to the prototypes for every module type (indexed by their ID&amp;#39;s).">prototypes</a>, std::mem_fun(&amp;<a class="code" href="classModule.html#bced57ac9e266f8674ea8a76e7aec51a" title="Called for prototypes to null links to other modules.">Module::nullModuleLinks</a>) );
<a name="l00255"></a>00255         <a class="code" href="util_8h.html#d61f0da3c1416d3f94b8353d135f499b" title="Deletes all pointers in a container (it has to support begin and end methods).">clearContainer</a>(<a class="code" href="classModuleFactory.html#340df38d1c652ee5174beb1886dd2e09" title="Pointers to the prototypes for every module type (indexed by their ID&amp;#39;s).">prototypes</a>);
<a name="l00256"></a>00256     }
<a name="l00258"></a>00258     <span class="keywordtype">void</span> <a class="code" href="classModuleFactory.html#2e1d9dc458f1bc1b4ec2a793923a9fb6" title="The real constructing routine.">initialize</a>();
<a name="l00259"></a>00259 
<a name="l00260"></a>00260 <span class="keyword">public</span>:
<a name="l00262"></a>00262     <span class="keyword">template</span>&lt;<span class="keyword">class</span> M&gt; <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classModuleFactory.html#c3832c78915135cde0d126557e01c332" title="Returns the ID of a module-type.">getModuleID</a>();
<a name="l00263"></a>00263 
<a name="l00265"></a>00265     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classModuleFactory.html#1f077511737d5c1503a95b097c93f977" title="Method to instantiate the singleton.">init</a>()
<a name="l00266"></a><a class="code" href="classModuleFactory.html#1f077511737d5c1503a95b097c93f977">00266</a>         { ASSERT(!<a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a>); (<a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a>=<span class="keyword">new</span> <a class="code" href="classModuleFactory.html" title="A singleton factory class for creating modules.">ModuleFactory</a>)-&gt;<a class="code" href="classModuleFactory.html#2e1d9dc458f1bc1b4ec2a793923a9fb6" title="The real constructing routine.">initialize</a>(); }
<a name="l00268"></a>00268     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classModuleFactory.html#150a3957a2e7ece0f98ee80d12e681a2" title="Method to delete the singleton.">destroy</a>()
<a name="l00269"></a><a class="code" href="classModuleFactory.html#150a3957a2e7ece0f98ee80d12e681a2">00269</a>         { <span class="keyword">delete</span> <a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a>; <a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a>=0; }
<a name="l00270"></a>00270 
<a name="l00272"></a>00272     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a>&amp; <a class="code" href="classModuleFactory.html#4fe6e48e4ad958b0c10c57fdfeec4d0a" title="Returns a reference to the module prototype with given id.">prototype</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {
<a name="l00273"></a><a class="code" href="classModuleFactory.html#4fe6e48e4ad958b0c10c57fdfeec4d0a">00273</a>         ASSERT( <a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a> &amp;&amp; <a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a>-&gt;<a class="code" href="classModuleFactory.html#340df38d1c652ee5174beb1886dd2e09" title="Pointers to the prototypes for every module type (indexed by their ID&amp;#39;s).">prototypes</a>.at(<span class="keywordtype">id</span>) );
<a name="l00274"></a>00274         <span class="keywordflow">return</span> *<a class="code" href="classModuleFactory.html#10557479de324c1a2fc8168769de48c5" title="Static pointer to the only instance of the ModuleFactory.">instance</a>-&gt;<a class="code" href="classModuleFactory.html#340df38d1c652ee5174beb1886dd2e09" title="Pointers to the prototypes for every module type (indexed by their ID&amp;#39;s).">prototypes</a>[id];
<a name="l00275"></a>00275     }
<a name="l00277"></a>00277     <span class="keyword">static</span> <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a>* <a class="code" href="classModuleFactory.html#a04f013d81baf61218167b7baccc732d" title="Returns a new instance of the module-type with given id.">newModule</a>( <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <a class="code" href="classModule.html#0d7267d0abb3311b695471793ad723aa" title="Two types of cloning, used in clone.">Module::CloneMethod</a> method=Module::DeepCopy )
<a name="l00278"></a><a class="code" href="classModuleFactory.html#a04f013d81baf61218167b7baccc732d">00278</a>         { <span class="keywordflow">return</span> <a class="code" href="classModuleFactory.html#4fe6e48e4ad958b0c10c57fdfeec4d0a" title="Returns a reference to the module prototype with given id.">prototype</a>(<span class="keywordtype">id</span>).<a class="code" href="classModule.html#40ff6b686b05a4757ccc592021fe189a" title="Cloning method, implemented in all modules via macros.">abstractClone</a>(method); }
<a name="l00279"></a>00279 
<a name="l00281"></a>00281     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classModuleFactory.html#de033bafb95d3e0603a0df2ac1d4590f" title="Sets appropriate prototype settings according to given module&amp;#39;s settings.">changeDefaultSettings</a>(<span class="keyword">const</span> <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a> &amp;module);
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="preprocessor">#ifndef __ICC</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span><span class="keyword">private</span>:
<a name="l00285"></a>00285 <span class="preprocessor">#endif</span>
<a name="l00286"></a>00286 <span class="preprocessor"></span><span class="comment">//  some helper stuff</span>
<a name="l00287"></a>00287     <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span>Creator {
<a name="l00288"></a>00288         T* operator()()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">new</span> T; }
<a name="l00289"></a>00289     };
<a name="l00290"></a>00290 <span class="keyword">private</span>:
<a name="l00291"></a>00291     <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span>Instantiator {
<a name="l00292"></a>00292         <span class="keywordtype">int</span> operator()() <span class="keyword">const</span>;
<a name="l00293"></a>00293     };
<a name="l00295"></a>00295     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classModuleFactory.html#f1e04431ebf6cedf3c14bf93fd4f5bc8" title="Never called, only exists for certain templates to be instantiated in modules.cpp...">instantiateModules</a>();
<a name="l00296"></a>00296 }; <span class="comment">// ModuleFactory class</span>
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 
<a name="l00300"></a>00300 <span class="keyword">template</span>&lt;<span class="keyword">class</span> Iface&gt; <span class="keyword">class </span><a class="code" href="classInterface.html" title="A base class for all interfaces, parametrized by the interface&amp;#39;s type.">Interface</a>: <span class="keyword">public</span> <a class="code" href="classModule.html" title="A common base class for all modules.">Module</a> {
<a name="l00301"></a><a class="code" href="classInterface.html">00301</a>     <span class="keyword">static</span> std::vector&lt;int&gt; <a class="code" href="classInterface.html#017699eb987e6caf1c53ee5d8dd54f18" title="IDs of modules derived from this interface.">compMods_</a>; 
<a name="l00302"></a><a class="code" href="classInterface.html#017699eb987e6caf1c53ee5d8dd54f18">00302</a> <span class="keyword">public</span>:
<a name="l00304"></a>00304     <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;int&gt;&amp; <a class="code" href="classInterface.html#3c61ce061b6cbd454aceb5e860eb9e10" title="Returns a reference to compMods_ (initializes it if empty).">getCompMods</a>();
<a name="l00306"></a>00306     <span class="keyword">static</span> <span class="keyword">const</span> Iface&amp; <a class="code" href="classInterface.html#9ef06869a24498ff86e0a1df2c614b19" title="Returns a reference to the index-th prototype implementing this interface.">compatiblePrototype</a>(<span class="keywordtype">int</span> index=0) {
<a name="l00307"></a><a class="code" href="classInterface.html#9ef06869a24498ff86e0a1df2c614b19">00307</a>         ASSERT( index&gt;=0 &amp;&amp; index&lt;(<span class="keywordtype">int</span>)<a class="code" href="classInterface.html#3c61ce061b6cbd454aceb5e860eb9e10" title="Returns a reference to compMods_ (initializes it if empty).">getCompMods</a>().size() );
<a name="l00308"></a>00308         <span class="keywordflow">return</span> *debugCast&lt;const Iface*&gt;(&amp;<a class="code" href="classModuleFactory.html#4fe6e48e4ad958b0c10c57fdfeec4d0a" title="Returns a reference to the module prototype with given id.">ModuleFactory::prototype</a>( <a class="code" href="classInterface.html#3c61ce061b6cbd454aceb5e860eb9e10" title="Returns a reference to compMods_ (initializes it if empty).">getCompMods</a>()[index] ));
<a name="l00309"></a>00309     }
<a name="l00311"></a>00311     <span class="keyword">static</span> Iface* <a class="code" href="classInterface.html#ae3b36356686de6d14320b23cb692463" title="Creates a new instance of the index-th compatible module (deep copy of the prototype)...">newCompatibleModule</a>(<span class="keywordtype">int</span> index=0)
<a name="l00312"></a><a class="code" href="classInterface.html#ae3b36356686de6d14320b23cb692463">00312</a>         { <span class="keywordflow">return</span> <a class="code" href="classInterface.html#9ef06869a24498ff86e0a1df2c614b19" title="Returns a reference to the index-th prototype implementing this interface.">compatiblePrototype</a>(index).clone(); }
<a name="l00313"></a>00313         
<a name="l00315"></a>00315     Iface* <a class="code" href="classInterface.html#fa78e8716ee75f703eee492ce833d768" title="Works like abstractClone(), but is public and returns the correct type.">clone</a>(<a class="code" href="classModule.html#0d7267d0abb3311b695471793ad723aa" title="Two types of cloning, used in clone.">CloneMethod</a> method=DeepCopy)<span class="keyword"> const</span>
<a name="l00316"></a><a class="code" href="classInterface.html#fa78e8716ee75f703eee492ce833d768">00316</a> <span class="keyword">        </span>{ <span class="keywordflow">return</span> debugCast&lt;Iface*&gt;( <a class="code" href="classModule.html#40ff6b686b05a4757ccc592021fe189a" title="Cloning method, implemented in all modules via macros.">abstractClone</a>(method) ); }
<a name="l00317"></a>00317 };
<a name="l00318"></a>00318 
<a name="l00319"></a>00319 <span class="preprocessor">#endif // MODULES_HEADER_</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Aug 6 22:33:14 2009 for Fractal Image Compressor by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
